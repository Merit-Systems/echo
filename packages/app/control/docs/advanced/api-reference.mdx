---
title: API Reference
description: V1 API reference for programmatic access to Echo
---

import { Callout } from 'fumadocs-ui/components/callout';

# API Reference

The Echo V1 API provides programmatic access for SDKs, CLI tools, and applications. All endpoints are prefixed with `/api/v1/`.

<Callout type="info">
All API endpoints use JSON request/response format. Most endpoints require authentication via API keys or JWT tokens.
</Callout>

## Authentication

The V1 API supports two authentication methods:

### API Keys
API keys are the primary authentication method for programmatic access. Include your API key in the request header:

```http
Authorization: Bearer your_api_key_here
```

### JWT Tokens  
JWT tokens are used for OAuth flows and temporary access. Include JWT tokens in either header:

```http
Authorization: Bearer your_jwt_token_here
```
or
```http
X-Echo-Token: your_jwt_token_here
```

## Applications

### List User Apps
```http
GET /api/v1/apps
```

List all Echo apps owned by the authenticated user.

**Authentication:** API key or JWT token required  

**Response Type:**
```typescript
{
  apps: PublicEchoApp[]
}
```

<AutoTypeTable 
  path="src/lib/apps/types.ts" 
  name="PublicEchoApp" 
/>

### Get App Details
```http
GET /api/v1/apps/{id}
```

Get detailed app information for programmatic access.

**Authentication:** API key or JWT token required  
**Path Parameters:**
- `id` (UUID) - App ID

**Response Type:** Returns a `PublicEchoApp` with detailed statistics

<AutoTypeTable 
  path="src/lib/apps/types.ts" 
  name="GlobalStatistics" 
/>

## Balance & Billing

### Get User Balance
```http
GET /api/v1/balance
```

Get authenticated user's credit balance.

**Authentication:** API key or JWT token required  
**Query Parameters:**
- `echoAppId` (UUID, optional) - Get app-specific balance instead of global

**Response Type:**

<AutoTypeTable 
  path="src/lib/balance/types.ts" 
  name="Balance" 
/>

For app-specific balance queries, returns:

<AutoTypeTable 
  path="src/lib/balance/types.ts" 
  name="AppBalance" 
/>

### Get Free Tier Balance
```http
POST /api/v1/balance/free
```

Get user's free tier spending information for a specific app.

**Authentication:** API key or JWT token required  

**Request Body:**
```typescript
{
  echoAppId: string
}
```

**Response Type:**
```typescript
{
  spendPoolBalance: {
    available: number;
    total: number; 
    used: number;
  };
  userSpendInfo: UserSpendInfo;
}
```

<AutoTypeTable 
  path="src/lib/spend-pools/types.ts" 
  name="UserSpendInfo" 
/>

## Payments

### Create Payment Link
```http
POST /api/v1/stripe/payment-link
```

Generate Stripe payment link for credit purchases.

**Authentication:** API key or JWT token required  

**Request Body:**
```typescript
{
  amount: number;
  successUrl?: string;
}
```

**Response Type:**
```typescript
{
  paymentUrl: string;
  sessionId: string;
  expiresAt: string;
}
```

<Callout type="info">
Payment amounts are in USD. The `successUrl` parameter is optional and will redirect users after successful payment.
</Callout>

## Models & Capabilities

### Get Supported Models
```http
GET /api/v1/supported-models
```

Get list of supported AI models with pricing information.

**Authentication:** None required  

**Response Type:**
```typescript
{
  models: SupportedModel[];
  models_by_provider: Record<string, string[]>;
}
```

**SupportedModel Interface:**
```typescript
interface SupportedModel {
  id: string;
  name: string;
  provider: string;
  inputPrice: number;
  outputPrice: number;
  contextLength: number;
}
```

## User Management

### Get User Info
```http
GET /api/v1/user
```

Get authenticated user profile information.

**Authentication:** API key or JWT token required  

**Response Type:**
```typescript
{
  id: string;
  email: string;
  name: string | null;
  createdAt: string;
  updatedAt: string;
  totalPaid: number;
  totalSpent: number;
}
```

### Register Referral Code
```http
POST /api/v1/user/referral
```

Apply a referral code for credits on a specific app.

**Authentication:** API key or JWT token required  

**Request Body:**
```typescript
{
  echoAppId: string;
  code: string;
}
```

**Response Type:**
```typescript
{
  success: boolean;
  message: string;
  creditsAwarded?: number;
}
```

## Error Responses

All endpoints return appropriate HTTP status codes and JSON error responses:

```json
{
  "error": "string",
  "message": "string",
  "statusCode": "number"
}
```

### Common Status Codes
- `200 OK` - Success
- `201 Created` - Resource created
- `400 Bad Request` - Invalid request data
- `401 Unauthorized` - Authentication required
- `403 Forbidden` - Insufficient permissions
- `404 Not Found` - Resource not found  
- `500 Internal Server Error` - Server error

<Callout type="info">
All endpoints require HTTPS in production environments. UUID parameters are validated for proper format.
</Callout>